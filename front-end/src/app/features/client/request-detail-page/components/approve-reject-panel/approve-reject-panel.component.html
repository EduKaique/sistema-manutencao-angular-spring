<main class="container" *ngIf="request">
  <div class="header">
    <div class="title-section">
      <h2>Orçamento #{{request.id}}</h2>
      <div class="status-section">
        <span class="status" 
          [class.rejected]="request.status === 'REJEITADA'"
          [class.approved]="request.status === 'APROVADA'">
          {{getStatusText()}}
        </span>
        <button *ngIf="request.status === 'REJEITADA'" class="rescue-button" (click)="resgatarServico()">
          Resgatar Orçamento
        </button>
      </div>
    </div>
  </div>

  <section class="request-details">
    <div class="info-grid">
      <div class="info-block">
        <h3>Equipamento</h3>
        <p>{{request.equipmentName}}</p>
      </div>
      <div class="info-block">
        <h3>Data da Solicitação</h3>
        <p>{{request.requestDate | date:'dd/MM/yyyy HH:mm'}}</p>
      </div>
    </div>

    <div class="description-block">
      <h3>Descrição do Defeito</h3>
      <p>{{request.equipmentDescription}}</p>
    </div>
  </section>

  <section class="budget-details">
    <div class="price-highlight">
      <h3>Valor do Serviço</h3>
      <p class="price">R$ 520,00</p>
    </div>

    <!-- <div class="info-row">
      <div class="info-block">
        <h3>Prazo de Execução</h3>
        <p class="deadline">2-5 dias úteis</p>
      </div>
    </div> -->

    <div *ngIf="request.status === 'REJEITADA'" class="rejection-info">
      <p class="rejection-status">Orçamento Reprovado</p>
      <p class="rejection-reason">{{request.rejectionReason}}</p>
    </div>

    <div *ngIf="request.status === 'APROVADA'" class="approval-info">
      <p class="approval-status">Orçamento Aprovado</p>
      <p class="approval-message">O serviço foi aprovado e será iniciado em breve.</p>
    </div>

    <!-- <div class="services-section">
      <h3>Serviços a serem realizados</h3>
      <ul class="services-list">
        <li>Diagnóstico técnico completo</li>
        <li>Substituição do cabo flat da tela</li>
        <li>Mão de obra especializada</li>
        <li>Limpeza interna + aplicação de pasta térmica</li>
      </ul>
    </div> -->
  </section>

  <div class="action-buttons" *ngIf="!request.status">
    <button class="reject-button" (click)="showRejectModal = true">
      Rejeitar Serviço
    </button>
    <button class="approve-button" (click)="aprovar()">
      Aprovar Serviço
    </button>
  </div>

  <app-reject-modal
    *ngIf="showRejectModal"
    (confirm)="onRejectConfirm($event)"
    (cancel)="onRejectCancel()">
  </app-reject-modal>
</main>